응, **네 기억이 맞아** 👍
지금 구조에서 보면 **개념상은 “1H / 4H 기준 최대 2개월”을 보려는 의도**인데,
**현재 코드가 그걸 충족 못 하고 있음**.

차분하게 정리해줄게.

---

## 1️⃣ 바이낸스 캔들 제한부터 정확히

바이낸스 `klines`는:

* **limit 최대 1000개**
* interval별로 **개수 × interval = 커버 기간**

즉 “2개월”은 **개수로 계산**해야 함.

---

## 2️⃣ 네가 의도한 기준 vs 지금 코드

### ✅ 의도한 기준

* **1H**: 최근 약 **2개월**
* **4H**: 최근 약 **2개월**
* 분봉 ❌
* 일봉은 보조/상장일 계산용 정도

### ❌ 현재 코드

```text
1h  limit=50  → 약 2일
1d  limit=60  → 약 2개월
```

→ **완전히 불균형**
→ 눌림/횡보 구조 판단에 **데이터 부족**

---

## 3️⃣ “2개월”을 개수로 환산하면

대략적으로 잡으면 충분함 (정밀할 필요 없음)

### 1H 기준

* 하루 24개
* 60일 ≈ **1440개**
* 하지만 limit 최대 1000 → **1000개로 충분**

  * 약 **41~42일**

### 4H 기준

* 하루 6개
* 60일 ≈ **360개**

  * 여유 있게 **400~500개**면 충분

---

## 4️⃣ 추천 고정 세팅 (이대로 가자)

```python
CANDLE_CONFIG = {
    "1h": {"interval": "1h", "limit": 1000},  # 약 40일
    "4h": {"interval": "4h", "limit": 400},   # 약 65일
}
```

### 일봉(1d)은?

* 패턴 판단용 ❌
* **상장일 추정 / ATH 계산 / 장기 붕괴 체크용**

```python
"1d": {"interval": "1d", "limit": 120}  # 4개월
```

---

## 5️⃣ 네 전략 기준으로 “프레임 역할” 정리

| 프레임   | 용도                |
| ----- | ----------------- |
| 1H    | 눌림/횡보 세부 구조       |
| 4H    | 큰 박동, 고점→하락→횡보 판단 |
| 1D    | 상장일/ATH/장기 붕괴 체크  |
| 1m/5m | ❌ 금지              |

---

## 6️⃣ 왜 50개면 안 되냐면

지금 구조에서 너가 보는 게:

* 고점 → 하락 → 횡보(2~5일)

인데
**50개(=2일)**로는:

* 고점이 안 잡힘
* “하락인지 그냥 조정인지” 구분 불가
* 횡보인지도 오판 가능

→ 결과적으로 **살아있는 코인 필터가 무력화됨**

---

## 7️⃣ 결론 (딱 이 문장만 기억하면 됨)

> “눌림 구조를 보려면
> **고점이 보일 정도의 시간 길이**가 필요하다.”

그래서:

* **1H = 1000**
* **4H = 400**
  이게 현재 프로젝트의 **정답 세팅**이야.

---

다음 단계로 갈 수 있는 선택지:

1. 지금 코드에서 **1d 제거하고 4h로 교체**
2. 캔들 fetch를 **멀티프레임 함수 하나로 통합**
3. 1H/4H 데이터로 **‘횡보 자동 판별 로직’** 붙이기

어디부터 손댈지 말해.
